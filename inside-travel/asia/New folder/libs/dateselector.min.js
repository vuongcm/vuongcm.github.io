function setCurrentDate(){var t=new Date,e=t.getDate(),a=t.getMonth(),r=t.getFullYear();10>e&&(e="0"+e),10>a&&(a="0"+a),t=e+"/"+a+"/"+r,this.dataVar.currentDate=t.substr(1,1),this.dataVar.currentMonth=t.substr(4,1),this.dataVar.currentYear=t.substr(6),this.dataVar.fullCurrentDate=t}function getFirstDay(t,e){var a=new Date(t,e,1);return a.getDay()}function setDatesPerMonth(t){t%4==0||t%100==0||t%400==0?(this.dataVar.getDatesPerMonth=[],this.dataVar.getDatesPerMonth.push("31","29","31","30","31","30","31","31","30","31","30"," 31")):(this.dataVar.getDatesPerMonth=[],this.dataVar.getDatesPerMonth.push("31","28","31","30","31","30","31","31","30","31","30"," 31"))}function monthYearSelector(){for(var t="<select id=dateselector-ui-monthselector>",e=0;e<this.dataVar.fullMonthNames.length;e++)t+=e==this.dataVar.currentMonth?"<option value="+e+" selected=selected>"+this.dataVar.fullMonthNames[e]+"</option>":"<option value="+e+">"+this.dataVar.fullMonthNames[e]+"</option>",e==this.dataVar.fullMonthNames.length&&(t+="</select>");for(var a="<select id=dateselector-ui-yearselector>",r=1970;2070>=r;r++)a+=r==this.dataVar.currentYear?"<option value="+r+" selected=selected>"+r+"</option>":"<option value="+r+">"+r+"</option>",2070==r&&(t+="</select>");$("#wkh").html(""),$("#wkh").append(t+a)}function fullPopulateDate(){setCurrentDate();var t="<table border=0 class=dateselector-ui-table>";return t+="<thead><tr><th colspan=7 id=wkh>"+this.dataVar.fullMonthNames[this.dataVar.currentMonth]+" "+this.dataVar.currentYear+"</th></tr>",t+="<tr><th class=disabled>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead>",t+="</table>"}function selectorHandler(){$(".dateselector-ui-table td").click(function(){var t=$("#dateselector-ui-monthselector").val();t=parseInt(t)+1;var e=$("#dateselector-ui-yearselector").val();parseInt(t)<10&&(t="0"+t);var a=$(this).html()+"-"+t+"-"+e;return parseInt($(this).html())<10&&(a="0"+a),$(this).hasClass("disabled")?void 0:a})}function appendDates(){var t=$("#dateselector-ui-monthselector").val(),e=$("#dateselector-ui-yearselector").val();setDatesPerMonth(e);var a=getFirstDay(e,t),r=this.dataVar.getDatesPerMonth[t],s="<tr>",l=this.dataVar.getDatesPerMonth[parseInt(t)-1]-(parseInt(a)+1);0==t&&(l=this.dataVar.getDatesPerMonth[11]-a+1);for(var o=1;r>=o;o++){var d=o,n=t,i=e;d=10>d?"0"+d:o,n=10>n?"0"+n:t;var c=d+"/"+n+"/"+i,h=parseInt($("#dateselector-ui-monthselector").val())-1;0>h&&(h=11),a>=o?(s+="<td class='past'>"+l++ +"</td>",r++):s+=c==this.dataVar.fullCurrentDate?"<td class='current disabled'>"+(o-a)+"</td>":1==o?"<td id=month"+this.dataVar.shortMonthNames[t]+">"+(o-a)+"</td>":"<td>"+(o-a)+"</td>",(o%7==0||o==r)&&(s+="</tr><tr>")}$(".dateselector-ui-table").append(s).show("slow"),$(".past:first-child").attr("id","month"+this.dataVar.shortMonthNames[h]),fillLastRow()}function fillLastRow(){var t=!1,e=1,a=parseInt($("#dateselector-ui-monthselector").val())+1;for(a>11&&(a=0);!t;)$(".dateselector-ui-table tbody tr:nth-last-child(2) td").length<7?$(".dateselector-ui-table tbody tr:nth-last-child(2)").append(1==e?"<td id=month"+this.dataVar.shortMonthNames[a]+">"+e++ +"</td>":"<td>"+e++ +"</td>"):t=!0}function removeDateSelector(){$(".dateselector-ui-table").each(function(){$(this).detach()})}function disablePast(){var t=$(".dateselector-ui-monthselector").val(),e=$(".dateselector-ui-yearselector").val();(t<this.dataVar.currentMonth||e<this.dataVar.currentYear)&&$(".dateselector-ui-table tbody td").addClass("disabled")}function scrollHandler(){$(".dateselector-ui-table tbody tr:first-child").append("<td id=dateselector-ui-backward class=disabled>&#9650;</td>"),$(".dateselector-ui-table tbody tr:nth-last-child(2)").append("<td id=dateselector-ui-forward class=disabled>&#9660;</td>");var t=parseInt($("#dateselector-ui-monthselector").val());$("#dateselector-ui-backward").click(function(){t>0?$("#dateselector-ui-monthselector").prop("selectedIndex",t-=1).change():0>=t&&$(this).addClass("dateselector-ui-max")}),$("#dateselector-ui-forward").click(function(){11>t?$("#dateselector-ui-monthselector").prop("selectedIndex",t+=1).change():t>=11&&$(this).addClass("dateselector-ui-max")})}var dataVar={fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],currentDate:"",getDatesPerMonth:[],currentDate:0,currentMonth:0,currentYear:0,fullCurrentDate:0};$.fn.extend({dateSelector:function(){$(this).attr("readonly",!0),$(this).prop("readonly",!0),$(this).wrap("<div class=dateselector-ui-wrapper></div>");var t=0;$(this).click(function(){if(0==$("body").hasClass(".dateselector-ui-table")){removeDateSelector();var e=this;0==t?($(fullPopulateDate()).insertAfter(this).toggle("slow"),monthYearSelector(),appendDates(),scrollHandler(),$(".dateselector-ui-table td:first-child").addClass("disabled"),$(".dateselector-ui-table tbody td:first").nextUntil("td.current").addClass("disabled"),$("#dateselector-ui-monthselector").on("change",function(){$(".dateselector-ui-table tbody tr").replaceWith(appendDates()).show("slow"),$(".dateselector-ui-table td:first-child").addClass("disabled"),scrollHandler(),parseInt(this.value)<parseInt(dataVar.currentMonth)&&$(".dateselector-ui-table tbody td").addClass("disabled"),$(".dateselector-ui-table td").click(function(){var t=$("#dateselector-ui-monthselector").val();t=parseInt(t)+1;var a=$("#dateselector-ui-yearselector").val();parseInt(t)<10&&(t="0"+t);var r=$(this).html()+"-"+t+"-"+a;parseInt($(this).html())<10&&(r="0"+r),$(this).hasClass("disabled")||($(e).val(r),removeDateSelector())}),fillLastRow()}),$("#dateselector-ui-yearselector").on("change",function(){$(".dateselector-ui-table tbody tr").replaceWith(appendDates()),$(".dateselector-ui-table td:first-child").addClass("disabled"),scrollHandler(),parseInt(this.value)<parseInt(dataVar.currentYear)&&$(".dateselector-ui-table tbody td").addClass("disabled"),$(".dateselector-ui-table td").click(function(){var t=$("#dateselector-ui-monthselector").val();t=parseInt(t)+1;var a=$("#dateselector-ui-yearselector").val();parseInt(t)<10&&(t="0"+t);var r=$(this).html()+"-"+t+"-"+a;parseInt($(this).html())<10&&(r="0"+r),$(this).hasClass("disabled")||($(e).val(r),removeDateSelector())}),fillLastRow()}),$(".dateselector-ui-table").scroll(function(){var t=$(this).scrollTop();t>1&&alert(123)}),$(".dateselector-ui-table td").click(function(){var t=$("#dateselector-ui-monthselector").val();t=parseInt(t)+1;var a=$("#dateselector-ui-yearselector").val();parseInt(t)<10&&(t="0"+t);var r=$(this).html()+"-"+t+"-"+a;parseInt($(this).html())<10&&(r="0"+r),$(this).hasClass("disabled")||($(e).val(r),removeDateSelector())}),t++):($(document).mouseup(function(t){var e=$(".dateselector-ui-table");e.is(t.target)||0!==e.has(t.target).length||removeDateSelector()}),$(document).keyup(function(t){27===t.which&&removeDateSelector()}),t=0)}else removeDateSelector()})}});